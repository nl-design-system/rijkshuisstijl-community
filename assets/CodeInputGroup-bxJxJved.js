import{j as o}from"./jsx-runtime-D_zvdyIk.js";import{r as f}from"./index-BJzegUt9.js";import{c as $,q as R}from"./index-Br7sdzbe.js";import{c as N}from"./clsx-B-dksMZM.js";import{T as _}from"./TextInput-DKkGVk9d.js";import{F as v}from"./Fieldset-CuCiI_Y1.js";const y=({capitalize:l=!1,ref:p,className:s,...c})=>o.jsx(_,{...c,className:N("rhc-code-input",{"rhc-code-input--capitalized":l},s),ref:p,type:"text"});y.displayName="CodeInput";y.__docgenInfo={description:"",methods:[],displayName:"CodeInput",props:{capitalize:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},ref:{required:!0,tsType:{name:"ForwardedRef",elements:[{name:"HTMLInputElement"}],raw:"ForwardedRef<HTMLInputElement>"},description:""}},composes:["TextboxProps"]};const j=({className:l,children:p,codeLength:s,invalid:c,label:h,legend:x,onChange:g,pattern:d="[a-zA-Z0-9]",capitalize:T=!1,ref:q,...w})=>{let a=new Array;const C=new Array(s).fill(f.useId()),n=f.useRef([]),u=new RegExp(`^${d}$`),I=`^${d}{1,${s}}$`,b=r=>{const e=Number(r.target.dataset.key),t=r.target.value;if(u.test(t)?a.splice(e,a[e]===void 0?0:1,t):t===""?a.splice(e,1,t):e===0&&t.length>1&&new RegExp(I).test(t.trim())&&(a=t.split(""),n.current.forEach((i,F)=>{i&&(i.value=a[F])}),m(n.current[s-1])),g){const i=T?a.join("").toUpperCase():a.join("");g(i)}},k=(r,e)=>{!u.test(r.key)&&r.key!=="Backspace"&&r.key!=="Tab"&&r.preventDefault(),u.test(r.key)&&e<s-1&&m(n.current[e+1]),r.key==="Backspace"&&e>0&&(r.currentTarget.value="",a.splice(e,1,""),m(n.current[e-1]))},m=r=>{setTimeout(()=>{r&&r.focus()})};return o.jsxs(v,{ref:q,children:[x&&o.jsx($,{children:x}),o.jsxs("div",{className:"utrecht-form-field",children:[h&&o.jsx("div",{className:"utrecht-form-field__label",children:o.jsx(R,{className:"rhc-code-input-group__label",htmlFor:C[0],children:h})}),o.jsxs("div",{className:N("rhc-code-input-group",l),children:[[...Array(s)].map((r,e)=>f.createElement(y,{...w,"aria-label":`${e+1}/${s}`,autoComplete:e===0?"one-time-code":"off",capitalize:T,"data-key":`${e}`,"data-testid":`rhc-code-input-${e}`,id:C[e],invalid:c,key:`${e}`,maxLength:e===0?s:1,pattern:e===0?I:d,ref:t=>n.current[e]=t,onChange:t=>b(t),onFocus:t=>t.target.select(),onKeyDown:t=>k(t,e)})),p]})]})]})};j.displayName="CodeInputGroup";j.__docgenInfo={description:"",methods:[],displayName:"CodeInputGroup",props:{codeLength:{required:!0,tsType:{name:"number"},description:""},invalid:{required:!1,tsType:{name:"boolean"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(code: string) => void",signature:{arguments:[{type:{name:"string"},name:"code"}],return:{name:"void"}}},description:""},label:{required:!1,tsType:{name:"ReactNode"},description:""},legend:{required:!1,tsType:{name:"ReactNode"},description:""},ref:{required:!1,tsType:{name:"ComponentPropsWithRef['ref']",raw:"ComponentPropsWithRef<typeof Fieldset>['ref']"},description:""},pattern:{defaultValue:{value:"'[a-zA-Z0-9]'",computed:!1},required:!1},capitalize:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["Omit"]};export{j as C};
